-- -----------------------------------------------------
-- Auto generated
-- -----------------------------------------------------


CREATE VIEW [NetO_restricted].[VwDECLRTN]
AS
   SELECT
      x.[LNUM],
      x.[BNUM],
      x.[DBID],
      HASHBYTES('SHA2_256', x.[JUDGMENT]) AS [JUDGMENT],
      x.[A_DBID],
      x.[A_SERIAL],
      x.[BANKRUPT],
      x.[B_DBID],
      HASHBYTES('SHA2_256', CAST(x.[B_SERIAL] AS NVARCHAR(50))) AS [B_SERIAL],
      x.[FORECLOS],
      x.[C_DBID],
      x.[C_SERIAL],
      x.[LAWSUIT],
      x.[D_DBID],
      x.[D_SERIAL],
      x.[OBLIGATE],
      x.[E_DBID],
      HASHBYTES('SHA2_256', CAST(x.[E_SERIAL] AS NVARCHAR(50))) AS [E_SERIAL],
      HASHBYTES('SHA2_256', x.[DELINQNT]) AS [DELINQNT],
      x.[F_DBID],
      HASHBYTES('SHA2_256', CAST(x.[F_SERIAL] AS NVARCHAR(50))) AS [F_SERIAL],
      HASHBYTES('SHA2_256', x.[ALIMONY]) AS [ALIMONY],
      x.[G_DBID],
      HASHBYTES('SHA2_256', CAST(x.[G_SERIAL] AS NVARCHAR(50))) AS [G_SERIAL],
      HASHBYTES('SHA2_256', x.[BORROWED]) AS [BORROWED],
      x.[H_DBID],
      x.[H_SERIAL],
      x.[COMAKER],
      x.[I_DBID],
      x.[I_SERIAL],
      HASHBYTES('SHA2_256', x.[CITIZEN]) AS [CITIZEN],
      x.[J_DBID],
      HASHBYTES('SHA2_256', CAST(x.[J_SERIAL] AS NVARCHAR(50))) AS [J_SERIAL],
      HASHBYTES('SHA2_256', x.[ALIEN]) AS [ALIEN],
      x.[K_DBID],
      x.[K_SERIAL],
      x.[OCCUPY],
      x.[L_DBID],
      HASHBYTES('SHA2_256', CAST(x.[L_SERIAL] AS NVARCHAR(50))) AS [L_SERIAL],
      HASHBYTES('SHA2_256', x.[OWNRSHIP]) AS [OWNRSHIP],
      x.[M_DBID],
      HASHBYTES('SHA2_256', CAST(x.[M_SERIAL] AS NVARCHAR(50))) AS [M_SERIAL],
      x.[S_PRPTYP],
      A0.[Descript] AS [S_PRPTYP_X],
      x.[S_TITLE],
      A1.[Descript] AS [S_TITLE_X],
      x.[BNKRPT_DISCHARGE_MOS],
      x.[FORECLOSURE_MOS],
      HASHBYTES('SHA2_256', x.[NON_PERMANENT_RESIDENT_ALIEN]) AS [NON_PERMANENT_RESIDENT_ALIEN],
      HASHBYTES('SHA2_256', x.[JUDGMENT_NOTES]) AS [JUDGMENT_NOTES],
      x.[BANKRUPT_NOTES],
      x.[FORECLOS_NOTES],
      x.[LAWSUIT_NOTES],
      x.[OBLIGATE_NOTES],
      HASHBYTES('SHA2_256', x.[DELINQNT_NOTES]) AS [DELINQNT_NOTES],
      HASHBYTES('SHA2_256', x.[ALIMONY_NOTES]) AS [ALIMONY_NOTES],
      HASHBYTES('SHA2_256', x.[BORROWED_NOTES]) AS [BORROWED_NOTES],
      x.[COMAKER_NOTES],
      HASHBYTES('SHA2_256', x.[CITIZEN_NOTES]) AS [CITIZEN_NOTES],
      HASHBYTES('SHA2_256', x.[ALIEN_NOTES]) AS [ALIEN_NOTES],
      x.[OCCUPY_NOTES],
      HASHBYTES('SHA2_256', x.[OWNRSHIP_NOTES]) AS [OWNRSHIP_NOTES],
      x.[AFFILIATION],
      HASHBYTES('SHA2_256', CAST(x.[DOWNPMT_BORR_AMT] AS NVARCHAR(50))) AS [DOWNPMT_BORR_AMT],
      x.[INSTALLMENT_LOAN],
      x.[MORTGAGE_LOAN],
      x.[PROPTAXES],
      x.[SHORT_SALE],
      x.[PROPFORECLOSE],
      x.[S_BANKRUPTCY_TYPE],
      A2.[Descript] AS [S_BANKRUPTCY_TYPE_X],
      x.[PREFORECLOS_NOTES],
      x.[PROPFORECL_NOTES],
      x.[PRIMRESID_NOTES],
      HASHBYTES('SHA2_256', x.[OWNERINTRST_NOTES]) AS [OWNERINTRST_NOTES],
      x.[MORTGAGELN_NOTES],
      HASHBYTES('SHA2_256', x.[NEWCREDIT_NOTES]) AS [NEWCREDIT_NOTES],
      x.[AFFILIATION_NOTES],
      x.[PROPERTYTAXES_NOTES],
      HASHBYTES('SHA2_256', x.[CHAPTER7_CHK]) AS [CHAPTER7_CHK],
      HASHBYTES('SHA2_256', x.[CHAPTER12_CHK]) AS [CHAPTER12_CHK],
      HASHBYTES('SHA2_256', x.[CHAPTER13_CHK]) AS [CHAPTER13_CHK],
      HASHBYTES('SHA2_256', x.[CHAPTER11_CHK]) AS [CHAPTER11_CHK],
      x.[OUTSTANJUDGE_EXTCIRCUM],
      x.[OUTSTANJUDGE_INCINFORM],
      HASHBYTES('SHA2_256', x.[DELINQUENT_DEBT_EXTCIRCUM]) AS [DELINQUENT_DEBT_EXTCIRCUM],
      HASHBYTES('SHA2_256', x.[DELINQUENT_DEBT_INCINFORM]) AS [DELINQUENT_DEBT_INCINFORM],
      x.[FORECLOSURE_EXTCIRCUM],
      x.[FORECLOSURE_INCINFORM],
      x.[SHORTSALE_EXTCIRCUM],
      x.[SHORTSALE_INCINFORM],
      x.[PROPERTYFORCLOSE_EXTCIRCUM],
      x.[PROPERTYFORCLOSE_INCINFORM],
      HASHBYTES('SHA2_256', x.[DECBANKRUPTCY_EXTCIRCUM]) AS [DECBANKRUPTCY_EXTCIRCUM],
      HASHBYTES('SHA2_256', x.[DECBANKRUPTCY_INCINFORM]) AS [DECBANKRUPTCY_INCINFORM],
      x.[FHA_SECOND_RESID_IND]
   FROM [clt_NetO].[DECLRTN] x
      LEFT JOIN [clt_NetO].[SymbolLookup] A0 on x.[S_PRPTYP] = A0.[DBSYMBOL] AND A0.[TableName] = 'DECLRTN' and A0.[COLUMNNAME] = 'S_PRPTYP'
      LEFT JOIN [clt_NetO].[SymbolLookup] A1 on x.[S_TITLE] = A1.[DBSYMBOL] AND A1.[TableName] = 'DECLRTN' and A1.[COLUMNNAME] = 'S_TITLE'
      LEFT JOIN [clt_NetO].[SymbolLookup] A2 on x.[S_BANKRUPTCY_TYPE] = A2.[DBSYMBOL] AND A2.[TableName] = 'DECLRTN' and A2.[COLUMNNAME] = 'S_BANKRUPTCY_TYPE'
   WHERE
      x.[ASAP_DeleteDateTime] IS NULL
      AND NOT EXISTS (SELECT * FROM [clt_NetO].[GF_TS_AUDIT_LOAN_DELETE] i WHERE x.[LNUM] = i.[DELETED_LNUM])
;
